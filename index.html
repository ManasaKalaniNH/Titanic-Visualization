<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <title>Titanic Visualization</title>
  <style>
    #right-panel-link {
      position: absolute;
      top: 200px;
      right: 100px;
    }
  </style>
</head>  
<body>
  <meta charset="utf-8">
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>
  <script type="text/javascript">
  </script>
  <div class="btn-group-vertical btn-group-sm pull-right " id="right-panel-link">
    <input class="btn btn-default"
      type = "button"
      value="Percentage"
      onclick="displayPercentage()" />
    <input class="btn btn-default"
      type = "button"
      value="Count"
      onclick="displayCount()" />
  </div>
  <script type="text/javascript">
    var margin = 75,
    width = 1400 - margin,
    height = 600 - margin;
    var svgheight=400
    var svgwidth=590
    d3.select('body')
      .attr('align','center')
      .append('h1')
      .text('Who Survived the Titanic?');
    var svg = dimple.newSvg("body",svgwidth, svgheight);
    function displayPercentage() {
      svg.selectAll("*").remove();
      d3.csv("titanic_survivalRate.csv", function draw(data){


      /*
        Dimple.js Chart construction code
      */

      var myChart = new dimple.chart(svg, data);
      myChart.setBounds(60, 30, 510, 330)
      var x = myChart.addCategoryAxis("x", ["PassengerClass","Sex"]); 
      var y=myChart.addMeasureAxis("y", "SurvivalRate");
      y.overrideMax = 100;
      myChart.addSeries("Sex",dimple.plot.bar);
      myChart.addLegend(65, 10, 510, 20, "right")
      myChart.ease = "linear";
      myChart.draw(500);
    });
      };
  function displayCount() {
    svg.selectAll("*").remove();
      d3.csv("titanic_Count.csv", function draw(data){

      /*
        Dimple.js Chart construction code
      */

      var myChart = new dimple.chart(svg, data);
      myChart.setBounds(60, 30, 510, 330)
      var x = myChart.addCategoryAxis("x", ["PassengerClass","Sex"]);
      var y=myChart.addMeasureAxis("y","Count");  
      var s=myChart.addSeries(["State"], dimple.plot.bar);
      s.addOrderRule(['Survived','Died'])
      myChart.assignColor("Female", "#FF9089", "#7f8c8d", 1);
      myChart.assignColor("Male", "#A984E8", "#7f8c8d", 1);
      myChart.addLegend(65, 10, 510, 20, "right");   
      myChart.defaultColors = [
          new dimple.color("#ABF5D9", "#55D3D9", 1),
          new dimple.color("#D6D3D9", "#7f8c8d", 1)
      ];
      myChart.ease = "linear";
      myChart.draw(500);
    });
      };

  /*
    Use D3 (not dimple.js) to load the TSV file
    and pass the contents of it to the draw function

   */
   displayPercentage() 
  
  </script>
</body>
</html>
